<html>
<head>
  <title>Pokemon</title>
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <link rel="stylesheet" type="text/css" href="main.css">
</head>
<body>
  <!--<img src="http://vignette1.wikia.nocookie.net/adventuretimewithfinnandjake/images/c/c2/Pokemon-logo.jpg/revision/latest?cb=20130307192515"id="pokelogo"><br>
  -->
  <div>
    Pokemon Number:&nbsp;&nbsp;&nbsp;<input id="pokemonNumber" name="" value=""><br>
    <br>
    <button class="button" type="button" id="showStats">Show stats!</button>
    <br><br><br>
    <div id="stats"></div>
  </div>
</body>

<script>
function toTitleCase(str) {
  return str.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
}

$(document).ready(function(){
});

var showStats = function(e) {
  var pokemonNumber = $('#pokemonNumber').val();
  console.log(pokemonNumber);
  var url = "https://pokeapi.co/api/v2/pokemon/"+pokemonNumber+"/";
  console.log(url);

  $("#stats").html("searching ...");

  $.getJSON( url , function( data ) {
    var htmlString = toTitleCase(data['name'])+'<br>';
    htmlString += "<img src=\""+data['sprites']['front_default']+"\"><br>"
    htmlString += "Types: ";
    var idx, len;
    len = data['types'].length;
    for (idx = 0; idx < len; idx++)
      htmlString += data['types'][idx]['type']['name'] + "&nbsp;";
    htmlString += "<br>";
    htmlString += "Height: " + data['height'] + '<br>';
    htmlString += "Weight: " + data['weight'] + '<br>';

    $("#stats").html(htmlString);
    console.log(url);
    console.log(data);
    console.log("Name: " + data['name']);

    $.getJSON("https://pokeapi.co/api/v2/pokemon/"+pokemonNumber+"/encounters", function(data2) {
        console.log(data2);
    });
  });
};


$(document).keypress(function(e) {
  if (e.which == 13) {
    console.log('Enter pressed');
    showStats(e);
  }
});

$('#showStats').click(function(e) {
  console.log("#showStats button clicked");
  showStats(e);
});
</script>
</html>
